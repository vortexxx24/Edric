const _0x96936b=_0x132b;function _0x353c(){const _0x44f6bb=['url_full','audio','198240hcghPN','audioMessage','concat','.bin','834808VGnSQk','../temp','string','14562ZhmATv','.webp','URL:\x20','contextInfo','writeFileSync','Send\x20or\x20reply\x20to\x20a\x20media\x20(image,\x20video,\x20audio,\x20sticker,\x20document)\x20to\x20get\x20a\x20URL.','video','Failed\x20to\x20upload\x20media.','quotedMessage','documentMessage','.jpg','document','message','ext','105207ylySRf','imageMessage','.png','1086600UtLLxX','8AJQPeP','.mp3','file.bin','join','sendMessage','existsSync','Failed\x20to\x20convert\x20media\x20to\x20URL.','2370lduMAb','url','push','path','now','219494tjBWIm','videoMessage','5waHYQC','@whiskeysockets/baileys','unlinkSync','stringify','extname','image','1529406CFsVPS','stickerMessage','fileName'];_0x353c=function(){return _0x44f6bb;};return _0x353c();}(function(_0x1cc972,_0x3dae3e){const _0x2ab21f=_0x132b,_0x293c8a=_0x1cc972();while(!![]){try{const _0x54811b=-parseInt(_0x2ab21f(0x155))/0x1+parseInt(_0x2ab21f(0x149))/0x2*(parseInt(_0x2ab21f(0x177))/0x3)+parseInt(_0x2ab21f(0x166))/0x4+-parseInt(_0x2ab21f(0x157))/0x5*(parseInt(_0x2ab21f(0x15d))/0x6)+parseInt(_0x2ab21f(0x162))/0x7+-parseInt(_0x2ab21f(0x148))/0x8+parseInt(_0x2ab21f(0x169))/0x9*(parseInt(_0x2ab21f(0x150))/0xa);if(_0x54811b===_0x3dae3e)break;else _0x293c8a['push'](_0x293c8a['shift']());}catch(_0x40782e){_0x293c8a['push'](_0x293c8a['shift']());}}}(_0x353c,0x24c10));const {downloadContentFromMessage}=require(_0x96936b(0x158)),fs=require('fs'),path=require(_0x96936b(0x153)),{UploadFileUgu,TelegraPh}=require('../lib/uploader');async function getMediaBufferAndExt(_0x4ab454){const _0x445810=_0x96936b,_0x1bc151=_0x4ab454[_0x445810(0x175)]||{};if(_0x1bc151[_0x445810(0x178)]){const _0x123794=await downloadContentFromMessage(_0x1bc151['imageMessage'],_0x445810(0x15c)),_0x12ab24=[];for await(const _0xadd5e4 of _0x123794)_0x12ab24[_0x445810(0x152)](_0xadd5e4);return{'buffer':Buffer[_0x445810(0x164)](_0x12ab24),'ext':_0x445810(0x173)};}if(_0x1bc151['videoMessage']){const _0x15c500=await downloadContentFromMessage(_0x1bc151[_0x445810(0x156)],_0x445810(0x16f)),_0x2475e9=[];for await(const _0x4d7786 of _0x15c500)_0x2475e9['push'](_0x4d7786);return{'buffer':Buffer[_0x445810(0x164)](_0x2475e9),'ext':'.mp4'};}if(_0x1bc151[_0x445810(0x163)]){const _0xf70ef5=await downloadContentFromMessage(_0x1bc151[_0x445810(0x163)],_0x445810(0x161)),_0x4ba609=[];for await(const _0x26d0ba of _0xf70ef5)_0x4ba609['push'](_0x26d0ba);return{'buffer':Buffer[_0x445810(0x164)](_0x4ba609),'ext':_0x445810(0x14a)};}if(_0x1bc151[_0x445810(0x172)]){const _0x3e4724=await downloadContentFromMessage(_0x1bc151[_0x445810(0x172)],_0x445810(0x174)),_0xef0001=[];for await(const _0x425e84 of _0x3e4724)_0xef0001[_0x445810(0x152)](_0x425e84);const _0x33be58=_0x1bc151['documentMessage'][_0x445810(0x15f)]||_0x445810(0x14b),_0x259d50=path[_0x445810(0x15b)](_0x33be58)||_0x445810(0x165);return{'buffer':Buffer['concat'](_0xef0001),'ext':_0x259d50};}if(_0x1bc151[_0x445810(0x15e)]){const _0x291c62=await downloadContentFromMessage(_0x1bc151[_0x445810(0x15e)],'sticker'),_0x5786f1=[];for await(const _0xff249d of _0x291c62)_0x5786f1[_0x445810(0x152)](_0xff249d);return{'buffer':Buffer['concat'](_0x5786f1),'ext':_0x445810(0x16a)};}return null;}function _0x132b(_0x5ef257,_0x5cb2b9){const _0x353c8b=_0x353c();return _0x132b=function(_0x132b23,_0xd8ca8f){_0x132b23=_0x132b23-0x148;let _0x54012f=_0x353c8b[_0x132b23];return _0x54012f;},_0x132b(_0x5ef257,_0x5cb2b9);}async function getQuotedMediaBufferAndExt(_0x1c13d8){const _0x500ed2=_0x96936b,_0x2a41c3=_0x1c13d8['message']?.['extendedTextMessage']?.[_0x500ed2(0x16c)]?.[_0x500ed2(0x171)]||null;if(!_0x2a41c3)return null;return getMediaBufferAndExt({'message':_0x2a41c3});}async function urlCommand(_0x197172,_0x48f560,_0x1a6b61){const _0x2a89db=_0x96936b;try{let _0x58eb73=await getMediaBufferAndExt(_0x1a6b61);if(!_0x58eb73)_0x58eb73=await getQuotedMediaBufferAndExt(_0x1a6b61);if(!_0x58eb73){await _0x197172[_0x2a89db(0x14d)](_0x48f560,{'text':_0x2a89db(0x16e)},{'quoted':_0x1a6b61});return;}const _0x312bb0=path[_0x2a89db(0x14c)](__dirname,_0x2a89db(0x167));if(!fs[_0x2a89db(0x14e)](_0x312bb0))fs['mkdirSync'](_0x312bb0,{'recursive':!![]});const _0x4b3d70=path['join'](_0x312bb0,''+Date[_0x2a89db(0x154)]()+_0x58eb73[_0x2a89db(0x176)]);fs[_0x2a89db(0x16d)](_0x4b3d70,_0x58eb73['buffer']);let _0x336956='';try{if(_0x58eb73[_0x2a89db(0x176)]===_0x2a89db(0x173)||_0x58eb73['ext']===_0x2a89db(0x179)||_0x58eb73[_0x2a89db(0x176)]===_0x2a89db(0x16a))try{_0x336956=await TelegraPh(_0x4b3d70);}catch{const _0x34b189=await UploadFileUgu(_0x4b3d70);_0x336956=typeof _0x34b189==='string'?_0x34b189:_0x34b189[_0x2a89db(0x151)]||_0x34b189['url_full']||JSON['stringify'](_0x34b189);}else{const _0x5d0726=await UploadFileUgu(_0x4b3d70);_0x336956=typeof _0x5d0726===_0x2a89db(0x168)?_0x5d0726:_0x5d0726['url']||_0x5d0726[_0x2a89db(0x160)]||JSON[_0x2a89db(0x15a)](_0x5d0726);}}finally{setTimeout(()=>{const _0x44d42a=_0x2a89db;try{if(fs['existsSync'](_0x4b3d70))fs[_0x44d42a(0x159)](_0x4b3d70);}catch{}},0x7d0);}if(!_0x336956){await _0x197172[_0x2a89db(0x14d)](_0x48f560,{'text':_0x2a89db(0x170)},{'quoted':_0x1a6b61});return;}await _0x197172['sendMessage'](_0x48f560,{'text':_0x2a89db(0x16b)+_0x336956},{'quoted':_0x1a6b61});}catch(_0x46a20f){console['error']('[URL]\x20error:',_0x46a20f?.['message']||_0x46a20f),await _0x197172[_0x2a89db(0x14d)](_0x48f560,{'text':_0x2a89db(0x14f)},{'quoted':_0x1a6b61});}}module['exports']=urlCommand;