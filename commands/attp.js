const _0x41f28a=_0x2584;(function(_0x59daed,_0x1e31fa){const _0xb69b45=_0x2584,_0x247b54=_0x59daed();while(!![]){try{const _0x5715fc=parseInt(_0xb69b45(0x1e5))/0x1+-parseInt(_0xb69b45(0x1da))/0x2+-parseInt(_0xb69b45(0x1d2))/0x3+-parseInt(_0xb69b45(0x1f3))/0x4+-parseInt(_0xb69b45(0x1fd))/0x5+parseInt(_0xb69b45(0x203))/0x6+-parseInt(_0xb69b45(0x1ea))/0x7*(-parseInt(_0xb69b45(0x1ef))/0x8);if(_0x5715fc===_0x1e31fa)break;else _0x247b54['push'](_0x247b54['shift']());}catch(_0x36f09a){_0x247b54['push'](_0x247b54['shift']());}}}(_0x2253,0xcb203));const {spawn}=require(_0x41f28a(0x1de)),fs=require('fs'),path=require(_0x41f28a(0x1d7)),{writeExifImg,writeExifVid}=require(_0x41f28a(0x1d6));async function attpCommand(_0xa2c17,_0x3b7aa2,_0x3e16b6){const _0x15a0bc=_0x41f28a,_0x5776db=_0x3e16b6[_0x15a0bc(0x1d5)][_0x15a0bc(0x204)]||_0x3e16b6[_0x15a0bc(0x1d5)][_0x15a0bc(0x202)]?.[_0x15a0bc(0x201)]||'',_0x3473bc=_0x5776db[_0x15a0bc(0x1e7)]('\x20')['slice'](0x1)[_0x15a0bc(0x1ff)]('\x20');if(!_0x3473bc){await _0xa2c17[_0x15a0bc(0x1d0)](_0x3b7aa2,{'text':_0x15a0bc(0x1d8)},{'quoted':_0x3e16b6});return;}try{const _0x47342e=await renderBlinkingVideoWithFfmpeg(_0x3473bc),_0x545926=await writeExifVid(_0x47342e,{'packname':_0x15a0bc(0x1dd)}),_0x4cb2c7=fs[_0x15a0bc(0x1e4)](_0x545926);try{fs['unlinkSync'](_0x545926);}catch(_0x1b167e){}await _0xa2c17[_0x15a0bc(0x1d0)](_0x3b7aa2,{'sticker':_0x4cb2c7},{'quoted':_0x3e16b6});}catch(_0x3fd139){console[_0x15a0bc(0x1d3)](_0x15a0bc(0x1f9),_0x3fd139),await _0xa2c17[_0x15a0bc(0x1d0)](_0x3b7aa2,{'text':_0x15a0bc(0x1e0)},{'quoted':_0x3e16b6});}}function _0x2584(_0x57eb8d,_0x2c4ccf){const _0x2253ab=_0x2253();return _0x2584=function(_0x2584b5,_0x195c6a){_0x2584b5=_0x2584b5-0x1d0;let _0x315cb2=_0x2253ab[_0x2584b5];return _0x315cb2;},_0x2584(_0x57eb8d,_0x2c4ccf);}module['exports']=attpCommand;function _0x2253(){const _0x27e47b=['4966230cbwccq','conversation','sendMessage','pipe:1','911049LeqCNT','error','platform','message','../lib/exif','path','Please\x20provide\x20text\x20after\x20the\x20.attp\x20command.','+faststart+frag_keyframe+empty_moov','1030114LhIkdZ','),0.1,0.2)\x27','drawtext=fontfile=\x27','Edric\x20OSðŸ˜ˆ','child_process','replace','Failed\x20to\x20generate\x20the\x20sticker\x20locally.','stdout','C:/Windows/Fonts/arialbd.ttf','),0.2)\x27','readFileSync','99268DSTMdJ','-frames:v','split','yuv420p','ffmpeg','13973169olvtzf','win32','push','-pix_fmt','-vf','8yUSzae','/usr/share/fonts/truetype/dejavu/DejaVuSans-Bold.ttf','concat','close','2733712EXLWfP','color=c=black:s=512x512:d=','\x27:text=\x27','lavfi','-c:v','ffmpeg\x20exited\x20with\x20code\x20','Error\x20generating\x20local\x20sticker:','),0.1)\x27','data','stderr','2944845huYnWc','\x27:fontcolor=green:borderw=2:bordercolor=black@0.6:fontsize=56:x=(w-text_w)/2:y=(h-text_h)/2:enable=\x27gte(mod(t,','join','toString','text','extendedTextMessage'];_0x2253=function(){return _0x27e47b;};return _0x2253();}function renderTextToPngWithFfmpeg(_0x49e72a){return new Promise((_0x279858,_0x86f621)=>{const _0x4f7c84=_0x2584,_0x160f8e=process[_0x4f7c84(0x1d4)]==='win32'?_0x4f7c84(0x1e2):_0x4f7c84(0x1f0),_0x287cc6=_0x4be255=>_0x4be255[_0x4f7c84(0x1df)](/\\/g,'\x5c\x5c')[_0x4f7c84(0x1df)](/:/g,'\x5c:')[_0x4f7c84(0x1df)](/'/g,'\x5c\x27')['replace'](/\[/g,'\x5c[')[_0x4f7c84(0x1df)](/\]/g,'\x5c]')[_0x4f7c84(0x1df)](/%/g,'\x5c%'),_0xf42166=_0x287cc6(_0x49e72a),_0x3b1467=process['platform']==='win32'?_0x160f8e[_0x4f7c84(0x1df)](/\\/g,'/')[_0x4f7c84(0x1df)](':','\x5c:'):_0x160f8e,_0x649a8a=['-y','-f',_0x4f7c84(0x1f6),'-i','color=c=#00000000:s=512x512','-vf',_0x4f7c84(0x1dc)+_0x3b1467+_0x4f7c84(0x1f5)+_0xf42166+'\x27:fontcolor=white:fontsize=56:borderw=2:bordercolor=black@0.6:x=(w-text_w)/2:y=(h-text_h)/2',_0x4f7c84(0x1e6),'1','-f','image2','pipe:1'],_0x3b08c9=spawn(_0x4f7c84(0x1e9),_0x649a8a),_0x1c347a=[],_0x473da5=[];_0x3b08c9[_0x4f7c84(0x1e1)]['on'](_0x4f7c84(0x1fb),_0xa9e690=>_0x1c347a[_0x4f7c84(0x1ec)](_0xa9e690)),_0x3b08c9[_0x4f7c84(0x1fc)]['on'](_0x4f7c84(0x1fb),_0x1ce969=>_0x473da5[_0x4f7c84(0x1ec)](_0x1ce969)),_0x3b08c9['on']('error',_0x86f621),_0x3b08c9['on'](_0x4f7c84(0x1f2),_0x46f6f6=>{const _0x3eb486=_0x4f7c84;if(_0x46f6f6===0x0)return _0x279858(Buffer[_0x3eb486(0x1f1)](_0x1c347a));_0x86f621(new Error(Buffer[_0x3eb486(0x1f1)](_0x473da5)['toString']()||'ffmpeg\x20exited\x20with\x20code\x20'+_0x46f6f6));});});}function renderBlinkingVideoWithFfmpeg(_0x516ec2){return new Promise((_0x31c8e6,_0x54de15)=>{const _0x187b1d=_0x2584,_0x14bb88=process[_0x187b1d(0x1d4)]===_0x187b1d(0x1eb)?'C:/Windows/Fonts/arialbd.ttf':_0x187b1d(0x1f0),_0x445d2b=_0x1e331c=>_0x1e331c[_0x187b1d(0x1df)](/\\/g,'\x5c\x5c')[_0x187b1d(0x1df)](/:/g,'\x5c:')[_0x187b1d(0x1df)](/,/g,'\x5c,')['replace'](/'/g,'\x5c\x27')['replace'](/\[/g,'\x5c[')[_0x187b1d(0x1df)](/\]/g,'\x5c]')[_0x187b1d(0x1df)](/%/g,'\x5c%'),_0x3fbe38=_0x445d2b(_0x516ec2),_0x16b68e=process[_0x187b1d(0x1d4)]===_0x187b1d(0x1eb)?_0x14bb88[_0x187b1d(0x1df)](/\\/g,'/')[_0x187b1d(0x1df)](':','\x5c:'):_0x14bb88,_0x33d892=0.3,_0x5b08ae=1.8,_0x2cdadc=_0x187b1d(0x1dc)+_0x16b68e+_0x187b1d(0x1f5)+_0x3fbe38+'\x27:fontcolor=red:borderw=2:bordercolor=black@0.6:fontsize=56:x=(w-text_w)/2:y=(h-text_h)/2:enable=\x27lt(mod(t,'+_0x33d892+_0x187b1d(0x1fa),_0x7daa18='drawtext=fontfile=\x27'+_0x16b68e+_0x187b1d(0x1f5)+_0x3fbe38+'\x27:fontcolor=blue:borderw=2:bordercolor=black@0.6:fontsize=56:x=(w-text_w)/2:y=(h-text_h)/2:enable=\x27between(mod(t,'+_0x33d892+_0x187b1d(0x1db),_0xc23397='drawtext=fontfile=\x27'+_0x16b68e+'\x27:text=\x27'+_0x3fbe38+_0x187b1d(0x1fe)+_0x33d892+_0x187b1d(0x1e3),_0x1ec2c3=_0x2cdadc+','+_0x7daa18+','+_0xc23397,_0x481f88=['-y','-f','lavfi','-i',_0x187b1d(0x1f4)+_0x5b08ae+':r=20',_0x187b1d(0x1ee),_0x1ec2c3,_0x187b1d(0x1f7),'libx264',_0x187b1d(0x1ed),_0x187b1d(0x1e8),'-movflags',_0x187b1d(0x1d9),'-t',String(_0x5b08ae),'-f','mp4',_0x187b1d(0x1d1)],_0x17b909=spawn(_0x187b1d(0x1e9),_0x481f88),_0x414053=[],_0x1c2d20=[];_0x17b909[_0x187b1d(0x1e1)]['on']('data',_0x48e2b2=>_0x414053[_0x187b1d(0x1ec)](_0x48e2b2)),_0x17b909[_0x187b1d(0x1fc)]['on']('data',_0x74917c=>_0x1c2d20['push'](_0x74917c)),_0x17b909['on'](_0x187b1d(0x1d3),_0x54de15),_0x17b909['on'](_0x187b1d(0x1f2),_0x2da4c1=>{const _0x4ed86f=_0x187b1d;if(_0x2da4c1===0x0)return _0x31c8e6(Buffer['concat'](_0x414053));_0x54de15(new Error(Buffer['concat'](_0x1c2d20)[_0x4ed86f(0x200)]()||_0x4ed86f(0x1f8)+_0x2da4c1));});});}