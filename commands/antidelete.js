const _0x51a1fb=_0x48f4;(function(_0x2e6169,_0xe4e7fd){const _0x5d1f0e=_0x48f4,_0x1a64e2=_0x2e6169();while(!![]){try{const _0x4ef0d0=parseInt(_0x5d1f0e(0x89))/0x1*(parseInt(_0x5d1f0e(0x9e))/0x2)+parseInt(_0x5d1f0e(0xa0))/0x3*(parseInt(_0x5d1f0e(0xa1))/0x4)+-parseInt(_0x5d1f0e(0xd7))/0x5*(parseInt(_0x5d1f0e(0xdb))/0x6)+parseInt(_0x5d1f0e(0x9b))/0x7+-parseInt(_0x5d1f0e(0xd9))/0x8+-parseInt(_0x5d1f0e(0xba))/0x9*(-parseInt(_0x5d1f0e(0xe1))/0xa)+parseInt(_0x5d1f0e(0xd3))/0xb;if(_0x4ef0d0===_0xe4e7fd)break;else _0x1a64e2['push'](_0x1a64e2['shift']());}catch(_0x892511){_0x1a64e2['push'](_0x1a64e2['shift']());}}}(_0x49ba,0xc4116));const fs=require('fs'),path=require(_0x51a1fb(0xa9)),{downloadContentFromMessage}=require(_0x51a1fb(0xcc)),{writeFile}=require(_0x51a1fb(0xe6)),settings=require(_0x51a1fb(0x8d)),messageStore=new Map(),CONFIG_PATH=path['join'](__dirname,'../data/antidelete.json'),TEMP_MEDIA_DIR=path[_0x51a1fb(0x95)](__dirname,_0x51a1fb(0xde));!fs[_0x51a1fb(0x8f)](TEMP_MEDIA_DIR)&&fs[_0x51a1fb(0xc0)](TEMP_MEDIA_DIR,{'recursive':!![]});function _0x48f4(_0x35ae5e,_0x9d2f77){const _0x49baeb=_0x49ba();return _0x48f4=function(_0x48f481,_0x3d1dd0){_0x48f481=_0x48f481-0x87;let _0x38557b=_0x49baeb[_0x48f481];return _0x38557b;},_0x48f4(_0x35ae5e,_0x9d2f77);}function loadAntideleteConfig(){const _0x3bc5ab=_0x51a1fb;try{if(!fs[_0x3bc5ab(0x8f)](CONFIG_PATH))return{'enabled':![],'dmTarget':settings[_0x3bc5ab(0x94)]?settings[_0x3bc5ab(0x94)]+_0x3bc5ab(0xd2):null};const _0x43194b=JSON['parse'](fs[_0x3bc5ab(0xca)](CONFIG_PATH));return!_0x43194b['dmTarget']&&settings[_0x3bc5ab(0x94)]&&(_0x43194b['dmTarget']=settings[_0x3bc5ab(0x94)]+_0x3bc5ab(0xd2)),_0x43194b;}catch{return{'enabled':![],'dmTarget':settings[_0x3bc5ab(0x94)]?settings[_0x3bc5ab(0x94)]+_0x3bc5ab(0xd2):null};}}function saveAntideleteConfig(_0xa95560){const _0xe9cfb5=_0x51a1fb;try{fs[_0xe9cfb5(0xc8)](CONFIG_PATH,JSON[_0xe9cfb5(0x93)](_0xa95560,null,0x2));}catch(_0x2f30bd){console[_0xe9cfb5(0xa2)]('Config\x20save\x20error:',_0x2f30bd);}}async function handleAntideleteCommand(_0x94637f,_0x5f0565,_0x1ed930,_0x31f758){const _0x11bebc=_0x51a1fb;if(!_0x1ed930[_0x11bebc(0xac)]['fromMe'])return _0x94637f[_0x11bebc(0x90)](_0x5f0565,{'text':_0x11bebc(0xae)},{'quoted':_0x1ed930});const _0xcbaa41=loadAntideleteConfig();if(!_0x31f758||_0x31f758===_0x11bebc(0xc1))return _0x94637f[_0x11bebc(0x90)](_0x5f0565,{'text':_0x11bebc(0xb5)+(_0x11bebc(0x8b)+(_0xcbaa41[_0x11bebc(0xe4)]?_0x11bebc(0xa8):_0x11bebc(0xe0))+'\x0a')+(_0x11bebc(0xb4)+(_0xcbaa41[_0x11bebc(0xdf)]||_0x11bebc(0xc5))+'\x0a\x0a')+_0x11bebc(0xa3)+_0x11bebc(0xc3)+'*.antidelete\x20setme*\x20-\x20Forward\x20deleted\x20messages\x20to\x20your\x20DM'},{'quoted':_0x1ed930});if(_0x31f758==='on')_0xcbaa41[_0x11bebc(0xe4)]=!![];else{if(_0x31f758===_0x11bebc(0xd5))_0xcbaa41['enabled']=![];else{if(_0x31f758===_0x11bebc(0x9a))_0xcbaa41[_0x11bebc(0xdf)]=_0x1ed930['key'][_0x11bebc(0xb7)]||_0x1ed930['key'][_0x11bebc(0xb1)];else return _0x94637f[_0x11bebc(0x90)](_0x5f0565,{'text':_0x11bebc(0x87)},{'quoted':_0x1ed930});}}return saveAntideleteConfig(_0xcbaa41),_0x94637f[_0x11bebc(0x90)](_0x5f0565,{'text':_0x11bebc(0xab)+(_0x31f758==='on'?'enabled':_0x31f758===_0x11bebc(0xd5)?_0x11bebc(0x8e):'DM\x20target\x20set')+'*'},{'quoted':_0x1ed930});}async function storeMessage(_0xd5cd1){const _0x20b3a8=_0x51a1fb;try{const _0x207b2d=loadAntideleteConfig();if(!_0x207b2d['enabled'])return;if(!_0xd5cd1[_0x20b3a8(0xac)]?.['id'])return;const _0x4a447b=_0xd5cd1[_0x20b3a8(0xac)]['id'];let _0x21f139='',_0x47e5f7='',_0x4c643f='';const _0x2cfabf=_0xd5cd1['key'][_0x20b3a8(0xb7)]||_0xd5cd1[_0x20b3a8(0xac)]['remoteJid'],_0x3f717f=_0xd5cd1[_0x20b3a8(0xe3)];if(_0x3f717f?.[_0x20b3a8(0xc6)])_0x21f139=_0x3f717f['conversation'];else _0x3f717f?.[_0x20b3a8(0xa5)]?.[_0x20b3a8(0xd4)]&&(_0x21f139=_0x3f717f[_0x20b3a8(0xa5)][_0x20b3a8(0xd4)]);if(!_0x21f139&&_0x3f717f){if(_0x3f717f[_0x20b3a8(0xcf)]&&_0x3f717f['imageMessage'][_0x20b3a8(0xce)]){_0x47e5f7=_0x20b3a8(0xda),_0x21f139=_0x3f717f[_0x20b3a8(0xcf)]['caption']||'';const _0x3d8846=await downloadContentFromMessage(_0x3f717f[_0x20b3a8(0xcf)],_0x20b3a8(0xda));let _0x3b0b2d=Buffer[_0x20b3a8(0xbf)]([]);for await(const _0x141191 of _0x3d8846)_0x3b0b2d=Buffer[_0x20b3a8(0xd8)]([_0x3b0b2d,_0x141191]);_0x4c643f=path[_0x20b3a8(0x95)](TEMP_MEDIA_DIR,_0x4a447b+_0x20b3a8(0xc9)),await writeFile(_0x4c643f,_0x3b0b2d);}else{if(_0x3f717f[_0x20b3a8(0x98)]&&_0x3f717f['stickerMessage']['mediaKey']){_0x47e5f7=_0x20b3a8(0xbc);const _0x184408=await downloadContentFromMessage(_0x3f717f[_0x20b3a8(0x98)],_0x20b3a8(0xbc));let _0x2a4b87=Buffer['from']([]);for await(const _0x5b0f26 of _0x184408)_0x2a4b87=Buffer[_0x20b3a8(0xd8)]([_0x2a4b87,_0x5b0f26]);_0x4c643f=path[_0x20b3a8(0x95)](TEMP_MEDIA_DIR,_0x4a447b+'.webp'),await writeFile(_0x4c643f,_0x2a4b87);}else{if(_0x3f717f['videoMessage']&&_0x3f717f[_0x20b3a8(0x92)]['mediaKey']){_0x47e5f7='video',_0x21f139=_0x3f717f[_0x20b3a8(0x92)][_0x20b3a8(0xb2)]||'';const _0x404e61=await downloadContentFromMessage(_0x3f717f[_0x20b3a8(0x92)],_0x20b3a8(0xe5));let _0x33be3b=Buffer[_0x20b3a8(0xbf)]([]);for await(const _0x3b4fe2 of _0x404e61)_0x33be3b=Buffer[_0x20b3a8(0xd8)]([_0x33be3b,_0x3b4fe2]);_0x4c643f=path[_0x20b3a8(0x95)](TEMP_MEDIA_DIR,_0x4a447b+'.mp4'),await writeFile(_0x4c643f,_0x33be3b);}else{if(_0x3f717f[_0x20b3a8(0xd1)]&&_0x3f717f[_0x20b3a8(0xd1)]['mediaKey']){_0x47e5f7='audio';const _0xf9d040=await downloadContentFromMessage(_0x3f717f[_0x20b3a8(0xd1)],'audio');let _0x46e945=Buffer['from']([]);for await(const _0x1aeb58 of _0xf9d040)_0x46e945=Buffer['concat']([_0x46e945,_0x1aeb58]);_0x4c643f=path['join'](TEMP_MEDIA_DIR,_0x4a447b+'.mp3'),await writeFile(_0x4c643f,_0x46e945);}}}}}messageStore[_0x20b3a8(0xc2)](_0x4a447b,{'content':_0x21f139,'mediaType':_0x47e5f7,'mediaPath':_0x4c643f,'sender':_0x2cfabf,'group':_0xd5cd1[_0x20b3a8(0xac)][_0x20b3a8(0xb1)]?.[_0x20b3a8(0xa4)](_0x20b3a8(0xe7))?_0xd5cd1['key'][_0x20b3a8(0xb1)]:null,'timestamp':new Date()['toISOString']()});}catch(_0xc203cf){console['error']('storeMessage\x20error:',_0xc203cf);}}async function handleMessageRevocation(_0x15887f,_0x192d82){const _0x8bd39f=_0x51a1fb;try{const _0x327ae6=loadAntideleteConfig();if(!_0x327ae6['enabled']||!_0x327ae6['dmTarget'])return;const _0x2cbe95=_0x192d82[_0x8bd39f(0xe3)]?.[_0x8bd39f(0x9d)];if(!_0x2cbe95?.[_0x8bd39f(0xac)]?.['id'])return;const _0x3760c6=_0x2cbe95[_0x8bd39f(0xac)]['id'],_0x5b5af2=_0x192d82[_0x8bd39f(0xb7)]||_0x192d82[_0x8bd39f(0xac)]?.['participant']||_0x192d82['key']?.['remoteJid']||'';if(_0x5b5af2&&_0x15887f?.[_0x8bd39f(0x8a)]?.['id']&&_0x5b5af2[_0x8bd39f(0xaa)](_0x15887f[_0x8bd39f(0x8a)]['id']))return;const _0x4aaf72=messageStore[_0x8bd39f(0x9c)](_0x3760c6);if(!_0x4aaf72)return;const _0x4a97ce=_0x327ae6['dmTarget'],_0x31cefa=_0x4aaf72[_0x8bd39f(0xbd)],_0xc4dba5=_0x192d82[_0x8bd39f(0x96)]||(_0x31cefa?_0x31cefa[_0x8bd39f(0xbe)]('@')[0x0]:_0x8bd39f(0xa6)),_0x2f37c0=_0x31cefa?_0x31cefa[_0x8bd39f(0xb3)](/[^0-9]/g,''):'Unknown',_0x329c55=new Date()[_0x8bd39f(0xcd)](_0x8bd39f(0xb8),{'timeZone':_0x8bd39f(0x88),'hour12':!![],'hour':_0x8bd39f(0x9f),'minute':'2-digit','second':_0x8bd39f(0x9f),'day':_0x8bd39f(0x9f),'month':'2-digit','year':'numeric'});let _0x3be6bf='';if(_0x4aaf72[_0x8bd39f(0xb6)])try{const _0x4a7666=await _0x15887f[_0x8bd39f(0xdc)](_0x4aaf72['group']);_0x3be6bf=_0x8bd39f(0xd6)+_0x4a7666[_0x8bd39f(0x91)];}catch{_0x3be6bf=_0x8bd39f(0xd6)+_0x4aaf72[_0x8bd39f(0xb6)];}const _0xa994ad=_0x5b5af2?'@'+_0x5b5af2[_0x8bd39f(0xbe)]('@')[0x0]:'Unknown',_0xfb28b6=_0x8bd39f(0xc7)+_0xc4dba5+_0x8bd39f(0xe2)+_0x2f37c0+_0x8bd39f(0xb0)+_0xa994ad+_0x8bd39f(0xc4)+_0x329c55+_0x3be6bf+'\x0a\x0a'+(_0x4aaf72['content']?_0x8bd39f(0x97)+_0x4aaf72[_0x8bd39f(0x8c)]+'\x22':'')+'\x0a\x0a‚ú¶‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ú¶\x0a\x0aüîí\x20Antidelete\x20Active\x0a\x0a‚ú¶‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ú¶';await _0x15887f[_0x8bd39f(0x90)](_0x4a97ce,{'text':_0xfb28b6,'mentions':[_0x5b5af2,_0x31cefa][_0x8bd39f(0xad)](Boolean)});if(_0x4aaf72[_0x8bd39f(0xb9)]&&fs['existsSync'](_0x4aaf72[_0x8bd39f(0xcb)])){const _0x1f0004={'caption':'*Deleted\x20'+_0x4aaf72[_0x8bd39f(0xb9)]+_0x8bd39f(0xa7)+_0xc4dba5+_0x8bd39f(0x99)+_0x2f37c0+')'+_0x3be6bf};try{switch(_0x4aaf72[_0x8bd39f(0xb9)]){case'image':await _0x15887f[_0x8bd39f(0x90)](_0x4a97ce,{'image':{'url':_0x4aaf72[_0x8bd39f(0xcb)]},..._0x1f0004});break;case _0x8bd39f(0xbc):await _0x15887f[_0x8bd39f(0x90)](_0x4a97ce,{'sticker':{'url':_0x4aaf72[_0x8bd39f(0xcb)]},..._0x1f0004});break;case _0x8bd39f(0xe5):await _0x15887f[_0x8bd39f(0x90)](_0x4a97ce,{'video':{'url':_0x4aaf72[_0x8bd39f(0xcb)]},..._0x1f0004});break;case _0x8bd39f(0xdd):await _0x15887f[_0x8bd39f(0x90)](_0x4a97ce,{'audio':{'url':_0x4aaf72[_0x8bd39f(0xcb)]},..._0x1f0004});break;}}catch(_0x28cd3f){await _0x15887f[_0x8bd39f(0x90)](_0x4a97ce,{'text':'‚ö†Ô∏è\x20Error\x20sending\x20media:\x20'+_0x28cd3f[_0x8bd39f(0xe3)]});}try{fs[_0x8bd39f(0xbb)](_0x4aaf72[_0x8bd39f(0xcb)]);}catch{}}messageStore[_0x8bd39f(0xd0)](_0x3760c6);}catch(_0x5ebe10){console[_0x8bd39f(0xa2)](_0x8bd39f(0xaf),_0x5ebe10);}}module['exports']={'handleAntideleteCommand':handleAntideleteCommand,'handleMessageRevocation':handleMessageRevocation,'storeMessage':storeMessage};function _0x49ba(){const _0x539597=['@whiskeysockets/baileys','toLocaleString','mediaKey','imageMessage','delete','audioMessage','@s.whatsapp.net','11683595LwRqcZ','text','off','\x0aüì¢\x20Group:\x20','10bZbolg','concat','6740400vyQvef','image','4471326aSKsZu','groupMetadata','audio','../tmp','dmTarget','‚ùå\x20Disabled','30AGTgSH','\x0a\x0aüì±\x20Number:\x20+','message','enabled','video','fs/promises','@g.us','*Invalid\x20command.\x20Use\x20.antidelete\x20to\x20see\x20usage.*','Africa/Lagos','4WYDGLb','user','Status:\x20','content','../settings.js','disabled','existsSync','sendMessage','subject','videoMessage','stringify','antideleteNumber','join','pushName','üí¨\x20Message:\x0a\x22','stickerMessage','\x20(+','setme','2806006rEVcZT','get','protocolMessage','445150rMwUBy','2-digit','6iHDruC','766060GpGCUO','error','*.antidelete\x20on*\x20-\x20Enable\x0a','endsWith','extendedTextMessage','Unknown','*\x0aFrom:\x20','‚úÖ\x20Enabled','path','includes','*Antidelete\x20','key','filter','*Only\x20the\x20bot\x20owner\x20can\x20use\x20this\x20command.*','handleMessageRevocation\x20error:','\x0a\x0aüôç\x20Deleted\x20By:\x20','remoteJid','caption','replace','Target\x20DM:\x20','*ANTIDELETE\x20STATUS*\x0a\x0a','group','participant','en-US','mediaType','1199259cJixOr','unlinkSync','sticker','sender','split','from','mkdirSync','status','set','*.antidelete\x20off*\x20-\x20Disable\x0a','\x0a\x0a‚è∞\x20Time:\x20','‚ùå\x20Not\x20set','conversation','‚ú¶‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ú¶\x0a\x0aüóëÔ∏è\x20*Deleted\x20Message\x20Recovered*\x0a\x0a‚ú¶‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ú¶\x0a\x0aüë§\x20Sender:\x20','writeFileSync','.jpg','readFileSync','mediaPath'];_0x49ba=function(){return _0x539597;};return _0x49ba();}